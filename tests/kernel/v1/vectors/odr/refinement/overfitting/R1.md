# Requirement Spec

## Scope
Define offline assistant memory behavior.

## Definitions
- Offline mode: no network access.
- Local vector index: persisted local retrieval map.

## Non-goals
- No social feed integrations.

## Invariants
- Memory runs without external APIs.
- Local index rebuild path is deterministic.

## Failure Codes
- REQ_SCOPE_DRIFT
- REQ_INDEX_INTEGRITY

## Acceptance Tests
- Verify no outbound network call in offline mode.
- Verify index rebuild reproduces deterministic keys.

## Change Log
- Added explicit local index integrity requirement.

```orket-constraints
{
  "must_have": [
    {"id": "MH-OFFLINE-001", "text": "Runtime must operate offline."},
    {"id": "MH-INDEX-001", "text": "Local vector index rebuild must be deterministic."}
  ],
  "forbidden": [
    {"id": "FB-TELEMETRY-001", "text": "Send data to third-party analytics."},
    {"id": "FB-SOCIAL-001", "text": "Auto-post updates to social networks."}
  ],
  "definitions": {
    "DEF-OFFLINE": "No external network dependency.",
    "DEF-INDEX": "Deterministic local index generation."
  },
  "acceptance_checks": [
    {"id": "AC-OFFLINE-001", "text": "All core flows pass without internet."},
    {"id": "AC-INDEX-001", "text": "Rebuild hash remains stable across runs."}
  ],
  "auditor_resolution": [
    {"issue_id": "AUD-201", "status": "addressed", "clause_id": "MH-INDEX-001"}
  ]
}
```
