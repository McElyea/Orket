# Requirement Spec

## Scope
Define offline assistant memory behavior.

## Definitions
- Offline mode: no network access.
- Local vector index: persisted local retrieval map.
- Backup snapshot: signed local archive.

## Non-goals
- No social feed integrations.

## Invariants
- Memory runs without external APIs.
- Local index rebuild path is deterministic.
- Backup snapshots are locally verifiable.

## Failure Codes
- REQ_SCOPE_DRIFT
- REQ_INDEX_INTEGRITY
- REQ_BACKUP_UNSIGNED

## Acceptance Tests
- Verify no outbound network call in offline mode.
- Verify index rebuild reproduces deterministic keys.
- Verify backup signatures validate offline.

## Change Log
- Added local backup signature requirement.

```orket-constraints
{
  "must_have": [
    {"id": "MH-OFFLINE-001", "text": "Runtime must operate offline."},
    {"id": "MH-INDEX-001", "text": "Local vector index rebuild must be deterministic."},
    {"id": "MH-BACKUP-001", "text": "Backup snapshots must include local signatures."}
  ],
  "forbidden": [
    {"id": "FB-TELEMETRY-001", "text": "Send data to third-party analytics."},
    {"id": "FB-SOCIAL-001", "text": "Auto-post updates to social networks."}
  ],
  "definitions": {
    "DEF-OFFLINE": "No external network dependency.",
    "DEF-INDEX": "Deterministic local index generation.",
    "DEF-BACKUP": "Locally verifiable snapshot."
  },
  "acceptance_checks": [
    {"id": "AC-OFFLINE-001", "text": "All core flows pass without internet."},
    {"id": "AC-INDEX-001", "text": "Rebuild hash remains stable across runs."},
    {"id": "AC-BACKUP-001", "text": "Backup signature verifies with local key."}
  ],
  "auditor_resolution": [
    {"issue_id": "AUD-202", "status": "addressed", "clause_id": "MH-BACKUP-001"}
  ]
}
```
