# Requirement Spec

## Scope
Local-first requirement refinement for user profile storage.

## Definitions
- Local storage: data remains on user device.
- Retention window: log duration in days.

## Non-goals
- No cloud data export.

## Invariants
- User profile data remains local.
- Audit logs have explicit retention.

## Failure Codes
- REQ_MISSING_CONSTRAINT
- REQ_RETENTION_UNSET

## Acceptance Tests
- Confirm profile data is never uploaded.
- Confirm retention period is configured before activation.

## Change Log
- Added retention policy requirement (duration pending decision).
- Added encryption requirement.

```orket-constraints
{
  "must_have": [
    {"id": "MH-LOCAL-001", "text": "Store user profile data locally."},
    {"id": "MH-RETENTION-001", "text": "Retain profile audit logs for DEC-RETENTION-DAYS days."},
    {"id": "MH-ENC-001", "text": "Encrypt audit logs at rest."}
  ],
  "decision_required": [
    {"id": "DEC-RETENTION-DAYS", "text": "Specify audit log retention period in days."}
  ],
  "forbidden": [
    {"id": "FB-CLOUD-001", "text": "Upload profile data to external services."}
  ],
  "definitions": {
    "DEF-LOCAL": "Data remains on the device.",
    "DEF-RETENTION": "Retention window in days."
  },
  "acceptance_checks": [
    {"id": "AC-LOCAL-001", "text": "No outbound profile-data API call."},
    {"id": "AC-RETENTION-001", "text": "Retention value is configured before log processing."}
  ],
  "auditor_resolution": [
    {"issue_id": "AUD-001", "status": "decision_required", "decision_id": "DEC-RETENTION-DAYS"},
    {"issue_id": "AUD-002", "status": "addressed", "clause_id": "MH-ENC-001"}
  ]
}
```
