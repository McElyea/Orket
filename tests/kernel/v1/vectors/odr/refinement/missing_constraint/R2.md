# Requirement Spec

## Scope
Local-first requirement refinement for user profile storage.

## Definitions
- Local storage: data remains on user device.
- Retention window: log duration in days.
- Recovery test: backup restoration validation.

## Non-goals
- No cloud data export.

## Invariants
- User profile data remains local.
- Audit logs have explicit retention.
- Backup restore path is validated quarterly.

## Failure Codes
- REQ_MISSING_CONSTRAINT
- REQ_RETENTION_UNSET
- REQ_RECOVERY_UNVERIFIED

## Acceptance Tests
- Confirm profile data is never uploaded.
- Confirm logs expire after 30 days.
- Confirm quarterly restore test passes.

## Change Log
- Added quarterly recovery validation.

```orket-constraints
{
  "must_have": [
    {"id": "MH-LOCAL-001", "text": "Store user profile data locally."},
    {"id": "MH-RETENTION-001", "text": "Retain profile audit logs for 30 days."},
    {"id": "MH-ENC-001", "text": "Encrypt audit logs at rest."},
    {"id": "MH-RECOVERY-001", "text": "Run quarterly backup restore tests."}
  ],
  "forbidden": [
    {"id": "FB-CLOUD-001", "text": "Upload profile data to external services."}
  ],
  "definitions": {
    "DEF-LOCAL": "Data remains on the device.",
    "DEF-RETENTION": "Retention window in days.",
    "DEF-RECOVERY": "Restore test cadence and evidence."
  },
  "acceptance_checks": [
    {"id": "AC-LOCAL-001", "text": "No outbound profile-data API call."},
    {"id": "AC-RETENTION-001", "text": "Logs older than 30 days are deleted."},
    {"id": "AC-RECOVERY-001", "text": "Quarterly restore report exists."}
  ],
  "auditor_resolution": [
    {"issue_id": "AUD-003", "status": "addressed", "clause_id": "MH-RECOVERY-001"}
  ]
}
```
