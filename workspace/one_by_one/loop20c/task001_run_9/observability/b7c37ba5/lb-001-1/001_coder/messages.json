[
  {
    "role": "system",
    "content": "IDENTITY: coder\nINTENT: Software Engineer role focusing on implementation and writing files.\n\nRESPONSIBILITIES:\n- Software Engineer role focusing on implementation and writing files.\n\niDESIGN CONSTRAINTS (Structural Integrity):\n- Maintain strict separation of concerns: Managers, Engines, Accessors, Utilities.\n- Managers orchestrate the workflow and high-level logic.\n- Engines handle complex computations or business rules.\n- Accessors manage state or external tool interactions.\n- Utilities provide cross-cutting logic.\n- Organize files into: /controllers, /managers, /engines, /accessors, /utils, /tests.\n\nCARD SYSTEM PROTOCOL:\n- You MAY call 'get_issue_context' to read comment history and intent.\n- A context-only response is invalid: do not stop after get_issue_context/read-only actions.\n- Use 'add_issue_comment' to log your progress, reasoning, and final handoff memo.\n- The Card System is the Source of Truth for INTENT. Files are the result of EXECUTION.\n- DO NOT narrate your plan in prose. Emit executable tool-call JSON blocks only.\n- Every action must be emitted as:\n  ```json\n  {\"tool\": \"<tool_name>\", \"args\": {\"key\": \"value\"}}\n  ```\n- If no valid action is possible, emit exactly one tool call to 'add_issue_comment' explaining the blocker.\n\nALLOWED TOOLS:\n- read_file\n- write_file\n- list_directory\n- add_issue_comment\n- get_issue_context\n- update_issue_status\n\nTOOL ARGUMENT CONTRACT:\n- write_file args MUST include: path (string), content (string)\n- read_file args MUST include: path (string)\n- add_issue_comment args MUST include: comment (string)\n- update_issue_status args MUST include: status (string)\n- If update_issue_status.status is 'blocked', args MUST include wait_reason in: resource|dependency|review|input|system\n- get_issue_context args MAY be {}\n- If Execution Context JSON includes required_action_tools, your turn is INVALID unless all listed tools are called.\n- If Execution Context JSON includes required_statuses, your update_issue_status.status MUST be one of them.\n- Return ONLY JSON tool blocks. No markdown explanations outside tool blocks.\n\nTURN COMPLETION CONTRACT:\n- You MUST write implementation code using write_file(path='agent_output/main.py', ...).\n- You MUST then call update_issue_status(status='code_review').\n\nSYNTAX DIALECT (qwen):\nYou MUST use this format for all file operations:\n{\n  \"tool\": \"write_file\",\n  \"args\": {\n    \"path\": \"filename.ext\",\n    \"content\": \"your code here\"\n  }\n}\n\nCONSTRAINTS:\n- NEVER include conversational filler.\n- Your output must be a SINGLE JSON object.\n- Do NOT use markdown code blocks (```json) unless the tool requires content containing them.\n- You MUST use 'update_issue_status' when a task is completed, blocked, or requires handover.\n\nGUARDRAIL: If you output text before or after the JSON block, the execution will fail.\n"
  },
  {
    "role": "user",
    "content": "Issue LB-001-1: Execute benchmark task 001: Implement a deterministic single-file function that satisfies the acceptance contract. Use stable ordering, fixed formatting, and deterministic output serialization. Quality contract: implement at least one non-trivial function body with >=2 meaningful statements, use function input parameters in computation, and do not return constant-only stub values. Code-shape contract: output focused implementation code in agent_output/main.py only. Do not emit CLI wrappers, crash handlers, orchestration boilerplate, or placeholder comments. Implement exactly one top-level function named deterministic_function(input_value) that performs deterministic computation using at least one intermediate variable assignment before returning a computed value.\n\nType: CardType.ISSUE\nPriority: 3.0"
  },
  {
    "role": "user",
    "content": "Execution Context JSON:\n{\"architecture_decision_path\": \"agent_output/design.txt\", \"architecture_decision_required\": false, \"architecture_forced_pattern\": null, \"architecture_mode\": \"architect_decides\", \"dependency_context\": {\"dependency_count\": 0, \"dependency_statuses\": {}, \"depends_on\": [], \"unresolved_dependencies\": []}, \"frontend_framework_forced\": \"vue\", \"frontend_framework_mode\": \"force_vue\", \"issue_id\": \"LB-001-1\", \"prompt_metadata\": {\"dialect_status\": \"legacy\", \"prompt_checksum\": \"a4a92e5640482621\", \"prompt_id\": \"legacy.prompt_compiler\", \"prompt_version\": \"legacy\", \"resolver_policy\": \"compiler\", \"role_status\": \"legacy\", \"selection_policy\": \"stable\"}, \"required_action_tools\": [\"write_file\", \"update_issue_status\"], \"required_read_paths\": [], \"required_statuses\": [\"code_review\"], \"required_write_paths\": [\"agent_output/main.py\"], \"runtime_verifier_ok\": null, \"seat\": \"coder\", \"stage_gate_mode\": \"auto\", \"status\": \"in_progress\"}"
  },
  {
    "role": "user",
    "content": "Turn Success Contract:\n- Required tool calls this turn: write_file, update_issue_status\n- Required update_issue_status.status values: code_review\n- If you choose status=blocked, include wait_reason: resource|dependency|review|input|system.\n- You must include all required tool calls in this same response.\n- A response containing only get_issue_context/add_issue_comment is invalid."
  },
  {
    "role": "user",
    "content": "Write Path Contract:\n- Required write_file paths this turn:\n  - agent_output/main.py\n- Use workspace-relative paths exactly as listed."
  },
  {
    "role": "user",
    "content": "Hallucination Verification Scope:\n{\"active_context\": [], \"archived_context\": [], \"consistency_tool_calls_only\": true, \"declared_interfaces\": [\"update_issue_status\", \"write_file\"], \"enforce_path_hardening\": true, \"forbidden_phrases\": [], \"max_active_context_items\": null, \"max_archived_context_items\": null, \"max_passive_context_items\": null, \"max_total_context_items\": null, \"max_workspace_items\": null, \"passive_context\": [], \"provided_context\": [], \"strict_grounding\": true, \"workspace\": [\"agent_output/main.py\"]}"
  }
]